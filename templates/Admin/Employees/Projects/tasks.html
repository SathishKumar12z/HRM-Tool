{% include "Layout/top.html" %}
{% include "Layout/side.html" %}

<!-- Page Wrapper -->
<div class="page-wrapper">
	<div class="chat-main-row">
		<div class="chat-main-wrapper">
			<div class="col-lg-7 message-view task-view task-left-sidebar">
				<div class="chat-window">
					<div class="fixed-header">
						<div class="navbar">
							<div class="float-start me-auto">
								<div class="add-task-btn-wrapper">
									<span class="add-task-btn btn btn-white btn-sm">
										Add Task
									</span>
								</div>
							</div>
							<a class="task-chat profile-rightbar float-end" id="task_chat" href="#task_window"><i
									class="fa fa fa-comment"></i></a>
							<ul class="nav float-end custom-menu">
								<li class="nav-item dropdown dropdown-action">
									<a href="#" class="dropdown-toggle" data-bs-toggle="dropdown"
										aria-expanded="false"><i class="fa-solid fa-gear"></i></a>
									<div class="dropdown-menu dropdown-menu-end custom-dropdown-menu">
										<a class="dropdown-item" href="javascript:void(0)">Pending Tasks</a>
										<a class="dropdown-item" href="javascript:void(0)">Completed Tasks</a>
										<a class="dropdown-item" href="javascript:void(0)">All Tasks</a>
									</div>
								</li>
							</ul>
						</div>
					</div>
					<div class="chat-contents">
						<div class="chat-content-wrap">
							<div class="chat-wrap-inner">
								<div class="chat-box">
									<div class="task-wrapper">
										<div class="task-list-container">
											<div class="task-list-body">
												<ul id="task-list">
													<!--<li class="task">
																	<div class="task-container">
																		<span class="task-action-btn task-check">
																			<span class="action-circle large complete-btn" title="Mark Complete">
																				<i class="material-icons">check</i>
																			</span>
																		</span>
																		<span class="task-label" contenteditable="true">Patient appointment booking</span>
																		<span class="task-action-btn task-btn-right">
																			<span class="action-circle large" title="Assign">
																				<i class="material-icons">person_add</i>
																			</span>
																			<span class="action-circle large delete-btn" title="Delete Task">
																				<i class="material-icons">delete</i>
																			</span>
																		</span>
																	</div>
																</li>
																<li class="task">
																	<div class="task-container">
																		<span class="task-action-btn task-check">
																			<span class="action-circle large complete-btn" title="Mark Complete">
																				<i class="material-icons">check</i>
																			</span>
																		</span>
																		<span class="task-label" contenteditable="true">Appointment booking with payment gateway</span>
			
																		<span class="task-action-btn task-btn-right">
																			<span class="action-circle large" title="Assign">
																				<i class="material-icons">person_add</i>
																			</span>
																			<span class="action-circle large delete-btn" title="Delete Task">
																				<i class="material-icons">delete</i>
																			</span>
																		</span>
																	</div>
																</li>
																<li class="completed task">
																	<div class="task-container">
																		<span class="task-action-btn task-check">
																			<span class="action-circle large complete-btn" title="Mark Complete">
																				<i class="material-icons">check</i>
																			</span>
																		</span>
																		<span class="task-label">Doctor available module</span>
																		<span class="task-action-btn task-btn-right">
																			<span class="action-circle large" title="Assign">
																				<i class="material-icons">person_add</i>
																			</span>
																			<span class="action-circle large delete-btn" title="Delete Task">
																				<i class="material-icons">delete</i>
																			</span>
																		</span>
																	</div>
																</li>
																<li class="task">
																	<div class="task-container">
																		<span class="task-action-btn task-check">
																			<span class="action-circle large complete-btn" title="Mark Complete">
																				<i class="material-icons">check</i>
																			</span>
																		</span>
																		<span class="task-label" contenteditable="true">Patient and Doctor video conferencing</span>
																		
																		<span class="task-action-btn task-btn-right">
																			<span class="action-circle large" title="Assign">
																				<i class="material-icons">person_add</i>
																			</span>
																			<span class="action-circle large delete-btn" title="Delete Task">
																				<i class="material-icons">delete</i>
																			</span>
																		</span>
																	</div>
																</li>
																<li class="task">
																	<div class="task-container">
																		<span class="task-action-btn task-check">
																			<span class="action-circle large complete-btn" title="Mark Complete">
																				<i class="material-icons">check</i>
																			</span>
																		</span>
																		<span class="task-label" contenteditable="true">Private chat module</span>
		
																		<span class="task-action-btn task-btn-right">
																			<span class="action-circle large" title="Assign">
																				<i class="material-icons">person_add</i>
																			</span>
																			<span class="action-circle large delete-btn" title="Delete Task">
																				<i class="material-icons">delete</i>
																			</span>
																		</span>
																	</div>
																</li>
																<li class="task">
																	<div class="task-container">
																		<span class="task-action-btn task-check">
																			<span class="action-circle large complete-btn" title="Mark Complete">
																				<i class="material-icons">check</i>
																			</span>
																		</span>
																		<span class="task-label" contenteditable="true">Patient Profile add</span>
																		<span class="task-action-btn task-btn-right">
																			<span class="action-circle large" title="Assign">
																				<i class="material-icons">person_add</i>
																			</span>
																			<span class="action-circle large delete-btn" title="Delete Task">
																				<i class="material-icons">delete</i>
																			</span>
																		</span>
																	</div>
																</li>-->
												</ul>
											</div>
											<div class="task-list-footer">
												<div class="new-task-wrapper">
													<textarea id="new-task" name="newTask"
														placeholder="Enter new task here. . ."></textarea>
													<span class="error-message hidden">You need to enter a task
														first</span>
													<span class="add-new-task-btn btn" id="add-task">Add Task</span>
													<span class="btn" id="close-task-panel">Close</span>
												</div>
											</div>
											<button class="btn save-task-btn" id="save-task">Save</button>
										</div>
									</div>
									<div class="notification-popup hide">
										<p>
											<span class="task"></span>
											<span class="notification-text"></span>
										</p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-lg-5 message-view task-chat-view task-right-sidebar" id="task_window">
				<div class="chat-window">
					<div class="fixed-header">
						<div class="navbar">
							<div class="task-assign">
								<a class="task-complete-btn" id="task_complete" href="javascript:void(0);">
									<i class="material-icons">check</i> Mark Complete
								</a>
							</div>
							<ul class="nav float-end custom-menu">
								<li class="dropdown dropdown-action">
									<a href="#" class="dropdown-toggle" data-bs-toggle="dropdown"
										aria-expanded="false"><i class="material-icons">more_vert</i></a>
									<div class="dropdown-menu dropdown-menu-end custom-dropdown-menu">
										<a class="dropdown-item" href="javascript:void(0)">Delete Task</a>
										<a class="dropdown-item" href="javascript:void(0)">Settings</a>
									</div>
								</li>
							</ul>
						</div>
					</div>
					<div class="chat-contents task-chat-contents">
						<div class="chat-content-wrap">
							<div class="chat-wrap-inner">
								<div class="chat-box">
									<div class="chats">
										<h4>Hospital Administration Phase 1</h4>
										<div class="task-header">
											<div class="assignee-info">
												<a href="#" data-bs-toggle="modal" data-bs-target="#assignee">
													<div class="avatar">
														<img src="assets/img/profiles/avatar-02.jpg" alt="User Image">
													</div>
													<div class="assigned-info">
														<div class="task-head-title">Assigned To</div>
														<div class="task-assignee">John Doe</div>
													</div>
												</a>
												<span class="remove-icon">
													<i class="fa fa-close"></i>
												</span>
											</div>
											<div class="task-due-date">
												<a href="#" data-bs-toggle="modal" data-bs-target="#assignee">
													<div class="due-icon">
														<span>
															<i class="material-icons">date_range</i>
														</span>
													</div>
													<div class="due-info">
														<div class="task-head-title">Due Date</div>
														<div class="due-date">Mar 26, 2019</div>
													</div>
												</a>
												<span class="remove-icon">
													<i class="fa fa-close"></i>
												</span>
											</div>
										</div>
										<hr class="task-line">
										<div class="task-desc">
											<div class="task-desc-icon">
												<i class="material-icons">subject</i>
											</div>
											<div class="task-textarea">
												<textarea class="form-control" placeholder="Description"></textarea>
											</div>
										</div>
										<hr class="task-line">
										<div class="task-information">
											<span class="task-info-line"><a class="task-user" href="#">Lesley Grauer</a>
												<span class="task-info-subject">created task</span></span>
											<div class="task-time">Jan 20, 2019</div>
										</div>
										<div class="task-information">
											<span class="task-info-line"><a class="task-user" href="#">Lesley Grauer</a>
												<span class="task-info-subject">added to Hospital
													Administration</span></span>
											<div class="task-time">Jan 20, 2019</div>
										</div>
										<div class="task-information">
											<span class="task-info-line"><a class="task-user" href="#">Lesley Grauer</a>
												<span class="task-info-subject">assigned to John Doe</span></span>
											<div class="task-time">Jan 20, 2019</div>
										</div>
										<hr class="task-line">
										<div class="task-information">
											<span class="task-info-line"><a class="task-user" href="#">John Doe</a>
												<span class="task-info-subject">changed the due date to Sep 28</span>
											</span>
											<div class="task-time">9:09pm</div>
										</div>
										<div class="task-information">
											<span class="task-info-line"><a class="task-user" href="#">John Doe</a>
												<span class="task-info-subject">assigned to you</span></span>
											<div class="task-time">9:10pm</div>
										</div>
										<div class="chat chat-left">
											<div class="chat-avatar">
												<a href="profile.html" class="avatar">
													<img src="assets/img/profiles/avatar-02.jpg" alt="User Image">
												</a>
											</div>
											<div class="chat-body">
												<div class="chat-bubble">
													<div class="chat-content">
														<span class="task-chat-user">John Doe</span> <span
															class="chat-time">8:35 am</span>
														<p>I'm just looking around.</p>
														<p>Will you tell me something about yourself? </p>
													</div>
												</div>
											</div>
										</div>
										<div class="completed-task-msg"><span class="task-success"><a href="#">John
													Doe</a> completed this task.</span> <span class="task-time">Today at
												9:27am</span></div>
										<div class="chat chat-left">
											<div class="chat-avatar">
												<a href="profile.html" class="avatar">
													<img src="assets/img/profiles/avatar-02.jpg" alt="User Image">
												</a>
											</div>
											<div class="chat-body">
												<div class="chat-bubble">
													<div class="chat-content">
														<span class="task-chat-user">John Doe</span> <span
															class="file-attached">attached 3 files <i
																class="fa-solid fa-paperclip"></i></span> <span
															class="chat-time">Feb 17, 2019 at 4:32am</span>
														<ul class="attach-list">
															<li><i class="fa fa-file"></i> <a
																	href="#">project_document.avi</a></li>
															<li><i class="fa fa-file"></i> <a
																	href="#">video_conferencing.psd</a></li>
															<li><i class="fa fa-file"></i> <a
																	href="#">landing_page.psd</a></li>
														</ul>
													</div>
												</div>
											</div>
										</div>
										<div class="chat chat-left">
											<div class="chat-avatar">
												<a href="profile.html" class="avatar">
													<img src="assets/img/profiles/avatar-16.jpg" alt="User Image">
												</a>
											</div>
											<div class="chat-body">
												<div class="chat-bubble">
													<div class="chat-content">
														<span class="task-chat-user">Jeffery Lalor</span> <span
															class="file-attached">attached file <i
																class="fa-solid fa-paperclip"></i></span> <span
															class="chat-time">Yesterday at 9:16pm</span>
														<ul class="attach-list">
															<li class="pdf-file"><i class="fa-regular fa-file-pdf"></i>
																<a href="#">Document_2016.pdf</a>
															</li>
														</ul>
													</div>
												</div>
											</div>
										</div>
										<div class="chat chat-left">
											<div class="chat-avatar">
												<a href="profile.html" class="avatar">
													<img src="assets/img/profiles/avatar-16.jpg" alt="User Image">
												</a>
											</div>
											<div class="chat-body">
												<div class="chat-bubble">
													<div class="chat-content">
														<span class="task-chat-user">Jeffery Lalor</span> <span
															class="file-attached">attached file <i
																class="fa-solid fa-paperclip"></i></span> <span
															class="chat-time">Today at 12:42pm</span>
														<ul class="attach-list">
															<li class="img-file">
																<div class="attach-img-download"><a
																		href="#">avatar-1.jpg</a></div>
																<div class="task-attach-img"><img
																		src="assets/img/user.jpg" alt="User Image">
																</div>
															</li>
														</ul>
													</div>
												</div>
											</div>
										</div>
										<div class="task-information">
											<span class="task-info-line">
												<a class="task-user" href="#">John Doe</a>
												<span class="task-info-subject">marked task as incomplete</span>
											</span>
											<div class="task-time">1:16pm</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="chat-footer">
						<div class="message-bar">
							<div class="message-inner">
								<a class="link attach-icon" href="#"><img src="assets/img/attachment.png"
										alt="Attachment Icon"></a>
								<div class="message-area">
									<div class="input-group">
										<textarea class="form-control" placeholder="Type message..."></textarea>
										<button class="btn btn-primary" type="button"><i
												class="fa-solid fa-paper-plane"></i></button>
									</div>
								</div>
							</div>
						</div>
						<div class="project-members task-followers">
							<span class="followers-title">Followers</span>
							<a class="avatar" href="#" data-bs-toggle="tooltip" title="Jeffery Lalor">
								<img src="assets/img/profiles/avatar-16.jpg" alt="User Image">
							</a>
							<a class="avatar" href="#" data-bs-toggle="tooltip" title="Richard Miles">
								<img src="assets/img/profiles/avatar-09.jpg" alt="User Image">
							</a>
							<a class="avatar" href="#" data-bs-toggle="tooltip" title="John Smith">
								<img src="assets/img/profiles/avatar-10.jpg" alt="User Image">
							</a>
							<a class="avatar" href="#" data-bs-toggle="tooltip" title="Mike Litorus">
								<img src="assets/img/profiles/avatar-05.jpg" alt="User Image">
							</a>
							<a href="#" class="followers-add" data-bs-toggle="modal" data-bs-target="#task_followers"><i
									class="material-icons">add</i></a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Create Project Modal -->
	<div id="create_project" class="modal custom-modal fade" role="dialog">
		<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Create Project</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form>
						<div class="row">
							<div class="col-sm-6">
								<div class="input-block mb-3">
									<label class="col-form-label">Project Name</label>
									<input class="form-control" type="text">
								</div>
							</div>
							<div class="col-sm-6">
								<div class="input-block mb-3">
									<label class="col-form-label">Client</label>
									<select class="select">
										<option>Global Technologies</option>
										<option>Delta Infotech</option>
									</select>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-6">
								<div class="input-block mb-3">
									<label class="col-form-label">Start Date</label>
									<div class="cal-icon">
										<input class="form-control datetimepicker" type="text">
									</div>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="input-block mb-3">
									<label class="col-form-label">End Date</label>
									<div class="cal-icon">
										<input class="form-control datetimepicker" type="text">
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-3">
								<div class="input-block mb-3">
									<label class="col-form-label">Rate</label>
									<input placeholder="$50" class="form-control" type="text">
								</div>
							</div>
							<div class="col-sm-3">
								<div class="input-block mb-3">
									<label class="col-form-label">&nbsp;</label>
									<select class="select">
										<option>Hourly</option>
										<option>Fixed</option>
									</select>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="input-block mb-3">
									<label class="col-form-label">Priority</label>
									<select class="select">
										<option>High</option>
										<option>Medium</option>
										<option>Low</option>
									</select>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-6">
								<div class="input-block mb-3">
									<label class="col-form-label">Add Project Leader</label>
									<input class="form-control" type="text">
								</div>
							</div>
							<div class="col-sm-6">
								<div class="input-block mb-3">
									<label class="col-form-label">Team Leader</label>
									<div class="project-members">
										<a class="avatar" href="#" data-bs-toggle="tooltip" title="Jeffery Lalor">
											<img src="assets/img/profiles/avatar-16.jpg" alt="User Image">
										</a>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-6">
								<div class="input-block mb-3">
									<label class="col-form-label">Add Team</label>
									<input class="form-control" type="text">
								</div>
							</div>
							<div class="col-sm-6">
								<div class="input-block mb-3">
									<label class="col-form-label">Team Members</label>
									<div class="project-members">
										<a class="avatar" href="#" data-bs-toggle="tooltip" title="John Doe">
											<img src="assets/img/profiles/avatar-02.jpg" alt="User Image">
										</a>
										<a class="avatar" href="#" data-bs-toggle="tooltip" title="Richard Miles">
											<img src="assets/img/profiles/avatar-09.jpg" alt="User Image">
										</a>
										<a class="avatar" href="#" data-bs-toggle="tooltip" title="John Smith">
											<img src="assets/img/profiles/avatar-10.jpg" alt="User Image">
										</a>
										<a class="avatar" href="#" data-bs-toggle="tooltip" title="Mike Litorus">
											<img src="assets/img/profiles/avatar-05.jpg" alt="User Image">
										</a>
										<span class="all-team">+2</span>
									</div>
								</div>
							</div>
						</div>
						<div class="input-block mb-3">
							<label class="col-form-label">Description</label>
							<div id="editor"></div>
						</div>
						<div class="input-block mb-3">
							<label class="col-form-label">Upload Files</label>
							<input class="form-control" type="file">
						</div>
						<div class="submit-section">
							<button class="btn btn-primary submit-btn">Submit</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- /Create Project Modal -->

	<!-- Assignee Modal -->
	<div id="assignee" class="modal custom-modal fade" role="dialog">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Assign to this task</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="input-group m-b-30">
						<input placeholder="Search to add" class="form-control search-input" type="text">
						<button class="btn btn-primary">Search</button>
					</div>
					<div>
						<ul class="chat-user-list">
							<li>
								<a href="#">
									<div class="chat-block d-flex">
										<span class="avatar"><img src="assets/img/profiles/avatar-09.jpg"
												alt="User Image"></span>
										<div class="media-body align-self-center text-nowrap">
											<div class="user-name">Richard Miles</div>
											<span class="designation">Web Developer</span>
										</div>
									</div>
								</a>
							</li>
							<li>
								<a href="#">
									<div class="chat-block d-flex">
										<span class="avatar"><img src="assets/img/profiles/avatar-10.jpg"
												alt="User Image"></span>
										<div class="media-body align-self-center text-nowrap">
											<div class="user-name">John Smith</div>
											<span class="designation">Android Developer</span>
										</div>
									</div>
								</a>
							</li>
							<li>
								<a href="#">
									<div class="chat-block d-flex">
										<span class="avatar">
											<img src="assets/img/profiles/avatar-16.jpg" alt="User Image">
										</span>
										<div class="media-body align-self-center text-nowrap">
											<div class="user-name">Jeffery Lalor</div>
											<span class="designation">Team Leader</span>
										</div>
									</div>
								</a>
							</li>
						</ul>
					</div>
					<div class="submit-section">
						<button class="btn btn-primary submit-btn">Assign</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- /Assignee Modal -->

	<!-- Task Followers Modal -->
	<div id="task_followers" class="modal custom-modal fade" role="dialog">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Add followers to this task</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="input-group m-b-30">
						<input placeholder="Search to add" class="form-control search-input" type="text">
						<button class="btn btn-primary">Search</button>
					</div>
					<div>
						<ul class="chat-user-list">
							<li>
								<a href="#">
									<div class="chat-block d-flex">
										<span class="avatar"><img src="assets/img/profiles/avatar-16.jpg"
												alt="User Image"></span>
										<div class="media-body media-middle text-nowrap">
											<div class="user-name">Jeffery Lalor</div>
											<span class="designation">Team Leader</span>
										</div>
									</div>
								</a>
							</li>
							<li>
								<a href="#">
									<div class="chat-block d-flex">
										<span class="avatar"><img src="assets/img/profiles/avatar-08.jpg"
												alt="User Image"></span>
										<div class="media-body media-middle text-nowrap">
											<div class="user-name">Catherine Manseau</div>
											<span class="designation">Android Developer</span>
										</div>
									</div>
								</a>
							</li>
							<li>
								<a href="#">
									<div class="chat-block d-flex">
										<span class="avatar"><img src="assets/img/profiles/avatar-26.jpg"
												alt="User Image"></span>
										<div class="media-body media-middle text-nowrap">
											<div class="user-name">Wilmer Deluna</div>
											<span class="designation">Team Leader</span>
										</div>
									</div>
								</a>
							</li>
						</ul>
					</div>
					<div class="submit-section">
						<button class="btn btn-primary submit-btn">Add to Follow</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- /Task Followers Modal -->

</div>
<!-- /Page Wrapper -->

<script>
	function displayTasks() {
		var taskTemplate = '<li class="task"><div class="task-container"><span class="task-action-btn task-check"><span class="action-circle large complete-btn" title="Mark Complete"><i class="material-icons">check</i></span></span><span class="task-label" contenteditable="true"></span><span class="task-action-btn task-btn-right"><span class="action-circle large" title="Assign"><i class="material-icons">person_add</i></span> <span class="action-circle large delete-btn" title="Delete Task"><i class="material-icons">delete</i></span></span></div></li>';
		fetch('http://127.0.0.1:8000/reload_task') // Replace with your actual endpoint
			.then(response => {
				if (!response.ok) {
					throw new Error('Network response was not ok');
				}
				const contentType = response.headers.get('content-type');
				if (contentType && contentType.indexOf('application/json') !== -1) {
					return response.json(); // Parse as JSON only if the content type is JSON
				} else {
					throw new Error('Expected JSON response, but received different content type');

				}
			})
			.then(data => {
				// Assuming `data.tasks` contains an array of tasks received from the backend
				console.log(data);
				data.task.forEach(task => {
					// // Create HTML elements or update the UI to display each task
					// // For example:
					// const taskElement = document.createElement('div');
					// taskElement.textContent = task.name;
					// document.getElementById('task-list').appendChild(taskElement);
					var todoListScrollHeight = $('.task-list-body').prop('scrollHeight');
					// Make a new task template
					var newTemplate = $(taskTemplate).clone();
					// update the task label in the new template
					newTemplate.find('.task-label').text(task.name);
					// Add new class to the template
					newTemplate.addClass('new');
					// Remove complete class in the new Template in case it is present
					newTemplate.removeClass('completed');
					//Append the new template to todo list
					$('#task-list').append(newTemplate);
					// Clear the text in textarea
					$('#new-task').val('');
					// As a new task is added, hide the mark all tasks as incomplete button & show the mark all finished button
					$('#mark-all-finished').removeClass('move-up');
					$('#mark-all-incomplete').addClass('move-down');
					// Show notification
					// Smoothly scroll the todo list to the end
					$('.task-list-body').animate({ scrollTop: todoListScrollHeight }, 1000);
				});
			})
			.catch(error => {
				console.error('Error:', error);
			});
	}
	window.addEventListener('DOMContentLoaded', function () {
		console.log('DOM content loaded');
		displayTasks(); // Call your displayTasks function here
	});

	document.getElementById('save-task').addEventListener('click', function () {
		var tasksData = [];

		// Loop through each task in the task-list-container
		document.querySelectorAll('.task-list-container .task-label').forEach(function (taskLabel) {
			var taskName = taskLabel.textContent.trim();
			// Push each task's data into the tasksData array
			tasksData.push({ name: taskName });
		});

		// Check if there are tasks to send
		if (tasksData.length > 0) {
			// Perform fetch request to send tasksData to the backend
			fetch('http://127.0.0.1:8000/saveTasks', {
				method: 'POST', // Change the HTTP method if needed
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify(tasksData) // Sending tasksData as JSON data
			})
				.then(response => {
					if (response.ok) {
						return response.json();
					} else {
						throw new Error('Network response was not ok.');
					}
				})
				.then(data => {
					updateNotification('Task updated saved successfully!');
				})
				.catch(error => {
					console.error('Error saving tasks:', error);
					// Handle error if needed
				});
		} else {
			console.error('No tasks to save.');
		}
	});
	var notificationTimeout;

	//Shows updated notification popup 
	var updateNotification = function (task, notificationText, newClass) {
		var notificationPopup = $('.notification-popup ');
		notificationPopup.find('.task').text(task);
		notificationPopup.find('.notification-text').text(notificationText);
		notificationPopup.removeClass('hide success');
		// If a custom class is provided for the popup, add It
		if (newClass)
			notificationPopup.addClass(newClass);
		// If there is already a timeout running for hiding current popup, clear it.
		if (notificationTimeout)
			clearTimeout(notificationTimeout);
		// Init timeout for hiding popup after 3 seconds
		notificationTimeout = setTimeout(function () {
			notificationPopup.addClass('hide');
		}, 3000);
	};


</script>

{% include "Layout/side_style.html" %}
{% include "Layout/bottom.html" %}